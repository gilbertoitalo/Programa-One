<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Reconhecimento de Voz</title>
    <style>
        #mic-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            border: none;
            background: none;
        }
        #mic-btn img {
            width: 40px;
            height: 40px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Teste de Reconhecimento de Voz</h1>
    <textarea id="txt-area1" placeholder="Transcrição aparecerá aqui..." rows="10" cols="50"></textarea><br>
    <button id="mic-btn"><img src="https://img.icons8.com/ios-filled/50/000000/microphone.png" alt="Icone de microfone"></button>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const micButton = document.getElementById('mic-btn');
            const input1 = document.getElementById('txt-area1');

            micButton.onclick = startRecognition;

            function startRecognition() {
                if ('webkitSpeechRecognition' in window) {
                    const recognition = new webkitSpeechRecognition();
                    recognition.lang = 'pt-BR';
                    recognition.continuous = false;
                    recognition.interimResults = false;

                    recognition.onstart = function() {
                        console.log('Voice recognition started. Try speaking into the microphone.');
                    };

                    recognition.onresult = function(event) {
                        console.log('Voice recognition result received:', event.results);
                        let transcript = event.results[0][0].transcript;
                        transcript = normalizeText(transcript);
                        input1.value = transcript;
                        console.log('Transcribed text:', transcript);
                    };

                    recognition.onerror = function(event) {
                        console.error('Error occurred in recognition: ' + event.error);
                        if (event.error === 'no-speech') {
                            alert('Nenhuma fala detectada. Por favor, fale claramente no microfone.');
                        }
                    };

                    recognition.onend = function() {
                        console.log('Voice recognition ended.');
                    };

                    recognition.start();
                    console.log('Recognition started');
                } else {
                    alert('Seu navegador não suporta a API de reconhecimento de voz.');
                    console.error('API de reconhecimento de voz não suportada.');
                }
            }

            function normalizeText(text) {
                return text.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
            }
        });
    </script>
</body>
</html>

